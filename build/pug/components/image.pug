mixin image(value = {})
  -
    let _class = value.class;
    let _figClass = value.figclass !== "" ? (value.figclass || "min-h-300") : "";
    let src = value.src || "cloudinary/city";
    let alt = value.alt || "Alternate text";

    let cloudinaryTest = /^cloudinary\//.test(src);
    let origin = "https://res.cloudinary.com/okikio-assets/image/upload/dpr_auto,f_auto,fl_lossy";
    let urlParse = (filters = "") => cloudinaryTest ? `${origin + filters}/${src.replace(/^cloudinary\//, "")}` : src;

  figure.img(class=_figClass itemprop="image" itemscope itemtype="https://schema.org/ImageObject")
    .img-overlay
    picture
      source(media='(max-width: 600px)' srcset!=`${urlParse(",w_600,q_70")}.webp` sizes="600px" width="600px" type='image/webp')
      source(media='(max-width: 600px)' srcset!=`${urlParse(",w_600,q_70")}.jpeg` sizes="600px" width="600px" type='image/jpeg')

      source(media='(min-width: 1200px)' srcset!=`${urlParse(",w_1100,q_100")}.webp` sizes="1100px" width="1100px" type='image/webp')
      source(media='(min-width: 1200px)' srcset!=`${urlParse(",w_1100,q_100")}.jpeg` sizes="1100px" width="1100px" type='image/jpeg')

      source(srcset!=`${urlParse(",w_850,q_100")}.webp` sizes="100vw" width="100vw" type='image/webp')
      img.img-core(class=_class src!=`${urlParse(",w_850,q_100")}.jpeg` sizes="100vw" width="100vw" alt=alt loading="lazy" itemprop="url")&attributes(attributes)
