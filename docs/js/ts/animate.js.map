{"version":3,"sources":["animate.ts"],"names":[],"mappings":"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","file":"../animate.js","sourcesContent":["import { EventEmitter, EventInput, ListenerCallback } from \"./api.js\";\r\n\r\n// DOM\r\nexport type AnimationTarget = string | Node | NodeList;\r\nexport const getElements = (selector: string | Node): Node[] => {\r\n    return typeof selector === \"string\" ? Array.from(document.querySelectorAll(selector as string)) : [selector];\r\n};\r\n\r\nexport const getTargets = (targets: AnimationTarget): Node[] => {\r\n    if (Array.isArray(targets)) return targets;\r\n    if (typeof targets == \"string\" || targets instanceof Node)\r\n        return getElements(targets);\r\n    if (targets instanceof NodeList) return Array.from(targets);\r\n    return [];\r\n};\r\n\r\nexport const computeValue = (value: any, ...args: any[]) =>\r\n    typeof value == \"function\" ? value(...args) : value;\r\n\r\nexport const mapObject = (obj: object, fn: Function): object => {\r\n    let keys = Object.keys(obj);\r\n    for (let i = 0, len = keys.length; i < len; i++) {\r\n        let key = keys[i];\r\n        let value = obj[key];\r\n        obj[key] = fn(value);\r\n    }\r\n\r\n    return obj;\r\n};\r\n\r\n// From: [https://easings.net]\r\nexport const easings = {\r\n    \"ease\": \"ease\",\r\n    \"ease-in\": \"ease-in\",\r\n    \"ease-out\": \"ease-out\",\r\n    \"ease-in-out\": \"ease-in-out\",\r\n\r\n    // Sine\r\n    \"ease-in-sine\": \"cubic-bezier(0.47, 0, 0.745, 0.715)\",\r\n    \"ease-out-sine\": \"cubic-bezier(0.39, 0.575, 0.565, 1)\",\r\n    \"ease-in-out-sine\": \"cubic-bezier(0.445, 0.05, 0.55, 0.95)\",\r\n\r\n    // Quad\r\n    \"ease-in-quad\": \"cubic-bezier(0.55, 0.085, 0.68, 0.53)\",\r\n    \"ease-out-quad\": \"cubic-bezier(0.25, 0.46, 0.45, 0.94)\",\r\n    \"ease-in-out-quad\": \"cubic-bezier(0.455, 0.03, 0.515, 0.955)\",\r\n\r\n    // Cubic\r\n    \"ease-in-cubic\": \"cubic-bezier(0.55, 0.055, 0.675, 0.19)\",\r\n    \"ease-out-cubic\": \"cubic-bezier(0.215, 0.61, 0.355, 1)\",\r\n    \"ease-in-out-cubic\": \"cubic-bezier(0.645, 0.045, 0.355, 1)\",\r\n\r\n    // Quart\r\n    \"ease-in-quart\": \"cubic-bezier(0.895, 0.03, 0.685, 0.22)\",\r\n    \"ease-out-quart\": \"cubic-bezier(0.165, 0.84, 0.44, 1)\",\r\n    \"ease-in-out-quart\": \"cubic-bezier(0.77, 0, 0.175, 1)\",\r\n\r\n    // Quint\r\n    \"ease-in-quint\": \"cubic-bezier(0.755, 0.05, 0.855, 0.06)\",\r\n    \"ease-out-quint\": \"cubic-bezier(0.23, 1, 0.32, 1)\",\r\n    \"ease-in-out-quint\": \"cubic-bezier(0.86, 0, 0.07, 1)\",\r\n\r\n    // Expo\r\n    \"ease-in-expo\": \"cubic-bezier(0.95, 0.05, 0.795, 0.035)\",\r\n    \"ease-out-expo\": \"cubic-bezier(0.19, 1, 0.22, 1)\",\r\n    \"ease-in-out-expo\": \"cubic-bezier(1, 0, 0, 1)\",\r\n\r\n    // Circ\r\n    \"ease-in-circ\": \"cubic-bezier(0.6, 0.04, 0.98, 0.335)\",\r\n    \"ease-out-circ\": \"cubic-bezier(0.075, 0.82, 0.165, 1)\",\r\n    \"ease-in-out-circ\": \"cubic-bezier(0.785, 0.135, 0.15, 0.86)\",\r\n\r\n    // Back\r\n    \"ease-in-back\": \"cubic-bezier(0.6, -0.28, 0.735, 0.045)\",\r\n    \"ease-out-back\": \"cubic-bezier(0.175, 0.885, 0.32, 1.275)\",\r\n    \"ease-in-out-back\": \"cubic-bezier(0.68, -0.55, 0.265, 1.55)\"\r\n};\r\n\r\nexport interface AnimationOptions {\r\n    target?: AnimationTarget,\r\n\r\n    delay?: number,\r\n    easing?: string,\r\n    endDelay?: number,\r\n    duration?: number,\r\n    autoplay?: boolean,\r\n    keyframes?: object[],\r\n    animation?: AnimationOptions,\r\n    loop?: number | boolean, // iterations: number,\r\n    fill?: \"none\" | \"forwards\" | \"backwards\" | \"both\" | \"auto\",\r\n    direction?: \"normal\" | \"reverse\" | \"alternate\" | \"alternate-reverse\",\r\n    [property: string]: boolean | object | string | string[] | number | null | (number | null)[] | undefined;\r\n};\r\n\r\nexport const DefaultAnimationOptions: AnimationOptions = {\r\n    keyframes: [],\r\n\r\n    loop: 1, // iterations: number,\r\n    delay: 0,\r\n    easing: \"ease\",\r\n    endDelay: 0,\r\n    duration: 1000,\r\n    direction: \"normal\",\r\n    fill: \"forwards\",\r\n    autoplay: true\r\n};\r\n\r\n// Check it out here: https://codepen.io/okikio/pen/qBbdGaW?editors=0011\r\nexport class Animate extends Promise<AnimationOptions> {\r\n    /**\r\n     * Stores the options for the current animation\r\n     *\r\n     * @protected\r\n     * @type AnimationOptions\r\n     * @memberof Animate\r\n     */\r\n    protected options: AnimationOptions = {};\r\n\r\n    /**\r\n     * The Array of Elements to Animate\r\n     *\r\n     * @protected\r\n     * @type {Node[]}\r\n     * @memberof Animate\r\n     */\r\n    protected targets: Node[] = [];\r\n\r\n    /**\r\n     * The properties to animate\r\n     *\r\n     * @protected\r\n     * @type {object}\r\n     * @memberof Animate\r\n     */\r\n    protected properties: object = {};\r\n\r\n    /**\r\n     * A Set of Animations\r\n     *\r\n     * @protected\r\n     * @type {Map<HTMLElement, Animation>}\r\n     * @memberof Animate\r\n     */\r\n    protected animations: Map<HTMLElement, Animation> = new Map();\r\n\r\n    /**\r\n     * An Array of promises that signify each Animation\r\n     *\r\n     * @protected\r\n     * @type {Promise<Animate>[]}\r\n     * @memberof Animate\r\n     */\r\n    protected promises: Promise<Animate>[] = [];\r\n\r\n    /**\r\n     * The total duration of all Animation's\r\n     *\r\n     * @protected\r\n     * @type {number}\r\n     * @memberof Animate\r\n     */\r\n    protected duration: number = 0;\r\n    protected currentTime: number = 0;\r\n    protected mainAnimation: Animation;\r\n    protected animationFrame: number;\r\n    protected mainElement: HTMLElement;\r\n    protected emitter: EventEmitter = new EventEmitter();\r\n\r\n    /**\r\n     * Creates an instance of Animate.\r\n     * \r\n     * @param {AnimationOptions} options\r\n     * @memberof Animate\r\n     */\r\n    constructor(\r\n        options: AnimationOptions = {},\r\n        finish?: any /* Typescript has some weird bugs, so in order declare a variable \r\n                       before the super's constructor you have to use it as a parameter */\r\n    ) {\r\n        super(resolve => { finish = resolve; });\r\n\r\n        let { animation, ...rest } = options;\r\n        this.options = Object.assign({}, DefaultAnimationOptions, animation, rest);\r\n\r\n        let {\r\n            loop,\r\n            delay,\r\n            easing,\r\n            endDelay,\r\n            duration,\r\n            direction,\r\n            fill,\r\n            target,\r\n            keyframes,\r\n            autoplay,\r\n            ...properties\r\n        } = this.options;\r\n        this.targets = getTargets(target);\r\n        this.properties = properties;\r\n\r\n        let animationKeyframe: Keyframe[] | PropertyIndexedKeyframes;\r\n        for (let i = 0, len = this.targets.length; i < len; i++) {\r\n            let target = this.targets[i];\r\n            let animationOptions = {\r\n                easing: easing.startsWith(\"ease\") ? easings[easing] : easing,\r\n                iterations: loop === true ? Infinity : (loop as number),\r\n                direction,\r\n                endDelay,\r\n                duration,\r\n                delay,\r\n                fill,\r\n            };\r\n\r\n            // Accept keyframes as the keyframes Object\r\n            animationKeyframe = (keyframes as Keyframe[]).length ?\r\n                (keyframes as Keyframe[]) :\r\n                (this.properties as PropertyIndexedKeyframes);\r\n\r\n            // Allows the use of functions as the values, for both the keyframes and the animation object\r\n            // It adds the capability of advanced stagger animation, similar to the anime js stagger functions\r\n            let valueClosure = (value: any) => computeValue(value, target, i, len);\r\n            mapObject(animationOptions, valueClosure);\r\n            mapObject(animationKeyframe, valueClosure);\r\n\r\n            // Set the Animate classes duration to be the Animation with the largest totalDuration\r\n            let tempDuration: number =\r\n                animationOptions.delay +\r\n                (animationOptions.duration * animationOptions.iterations) +\r\n                animationOptions.endDelay;\r\n            if (this.duration < tempDuration) this.duration = tempDuration;\r\n\r\n            // Add animation to the Animations Set\r\n            let animation = (target as HTMLElement).animate(animationKeyframe, animationOptions);\r\n            this.animations.set((target as HTMLElement), animation);\r\n        }\r\n\r\n        this.mainElement = document.createElement(\"span\");\r\n        this.mainAnimation = this.mainElement.animate([\r\n            { opacity: \"0\" },\r\n            { opacity: \"1\" }\r\n        ], {\r\n            duration: this.duration,\r\n            easing: \"linear\"\r\n        });\r\n\r\n        if (autoplay) this.play();\r\n        else this.pause();\r\n        console.log(\"A slight change Watch pretty cool\");\r\n        \r\n        this.mainAnimation.onfinish = () => {\r\n            window.cancelAnimationFrame(this.animationFrame);\r\n            finish(this.options);\r\n        };\r\n\r\n        // Add each Animation as a promise to the promises Array\r\n        // this.animations.forEach(animation => {\r\n        //     if (autoplay) animation.play();\r\n        //     else animation.pause();\r\n\r\n        //     this.promises.push(new Promise(finish => {\r\n        //         animation.onfinish = () => { finish(); };\r\n        //     }));\r\n        // });\r\n\r\n        // (async () => {\r\n        //     await Promise.all(this.promises);\r\n        //     finish(this.options);\r\n        // })();\r\n    }\r\n\r\n    // You can also use Symbol.species in order to\r\n    // return a Promise for then/catch/finally\r\n    static get [Symbol.species]() {\r\n        return Promise;\r\n    }\r\n\r\n    // Promise overrides this Symbol.toStringTag\r\n    get [Symbol.toStringTag]() {\r\n        return 'MyPromise';\r\n    }\r\n\r\n    /**\r\n     * Represents an Animation Frame Loop\r\n     *\r\n     * @private\r\n     * @memberof Animate\r\n     */\r\n    protected loop(): void {\r\n        this.animationFrame = window.requestAnimationFrame(this.loop.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Adds a listener for a given event\r\n     *\r\n     * @param {EventInput} events\r\n     * @param {ListenerCallback} [callback]\r\n     * @param {object} [scope]\r\n     * @returns {Animate}\r\n     * @memberof Animate\r\n     */\r\n    public on(events: EventInput, callback?: ListenerCallback, scope?: object): Animate {\r\n        this.emitter.on(events, callback, scope);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a listener from an event\r\n     *\r\n     * @param {EventInput} events\r\n     * @param {ListenerCallback} [callback]\r\n     * @param {object} [scope]\r\n     * @returns {Animate}\r\n     * @memberof Animate\r\n     */\r\n    public off(events: EventInput, callback?: ListenerCallback, scope?: object): Animate {\r\n        this.emitter.off(events, callback, scope);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Call all listeners within an event\r\n     *\r\n     * @param {(string | any[])} events\r\n     * @param {...any} args\r\n     * @returns {Animate}\r\n     * @memberof Animate\r\n     */\r\n    public emit(events: string | any[], ...args: any): Animate {\r\n        this.emitter.emit(events, args);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Get a specific Animation from an Animate instance\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @returns {Animation}\r\n     * @memberof Animate\r\n     */\r\n    public getAnimation(element: HTMLElement): Animation {\r\n        return this.animations.get(element);\r\n    }\r\n\r\n    /**\r\n     * Play Animation's\r\n     *\r\n     * @returns {Animate}\r\n     * @memberof Animate\r\n     */\r\n    public play(): Animate {\r\n        this.mainAnimation.play();\r\n        this.animationFrame = requestAnimationFrame(this.loop.bind(this));\r\n        this.animations.forEach(animation => {\r\n            animation.play();\r\n        });\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Pause Animation's\r\n     *\r\n     * @returns {Animate}\r\n     * @memberof Animate\r\n     */\r\n    public pause(): Animate {\r\n        this.mainAnimation.pause();\r\n        window.cancelAnimationFrame(this.animationFrame);\r\n        this.animations.forEach(animation => {\r\n            animation.pause();\r\n        });\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Returns the total duration of all Animations\r\n     *\r\n     * @returns {number}\r\n     * @memberof Animate\r\n     */\r\n    public getDuration(): number {\r\n        return this.duration;\r\n    }\r\n\r\n    /**\r\n     * Returns the current time of the Main Animation\r\n     *\r\n     * @returns {number}\r\n     * @memberof Animate\r\n     */\r\n    public getCurrentTime(): number {\r\n        return this.mainAnimation.currentTime;\r\n    }\r\n\r\n    /**\r\n     * Returns the Animation progress as a fraction of the current time / duration\r\n     *\r\n     * @returns\r\n     * @memberof Animate\r\n     */\r\n    public getProgress() {\r\n        return this.getCurrentTime() / this.duration;\r\n    }\r\n\r\n    /**\r\n     * Set the current time of the Main Animation\r\n     *\r\n     * @param {number} time\r\n     * @returns {Animate}\r\n     * @memberof Animate\r\n     */\r\n    public setCurrentTime(time: number): Animate {\r\n        this.mainAnimation.currentTime = time;\r\n        this.animations.forEach(animation => {\r\n            animation.currentTime = time;\r\n        });\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Reset all Animations\r\n     *\r\n     * @memberof Animate\r\n     */\r\n    public reset() {\r\n        this.pause();\r\n        this.setCurrentTime(0);\r\n    }\r\n\r\n    /**\r\n     * Returns the current playing state\r\n     *\r\n     * @returns {(\"idle\" | \"running\" | \"paused\" | \"finished\")}\r\n     * @memberof Animate\r\n     */\r\n    public getPlayState(): \"idle\" | \"running\" | \"paused\" | \"finished\" {\r\n        return this.mainAnimation.playState;\r\n    }\r\n\r\n    /**\r\n     * Get the options of an Animate instance\r\n     *\r\n     * @returns {AnimationOptions}\r\n     * @memberof Animate\r\n     */\r\n    public getOptions(): AnimationOptions {\r\n        return this.options;\r\n    }\r\n\r\n    // Returns the Animate options, as JSON\r\n    public toJSON(): AnimationOptions {\r\n        return this.options;\r\n    }\r\n}\r\n\r\nexport const animate = (options: AnimationOptions = {}): Animate => {\r\n    return new Animate(options);\r\n};\r\nexport default animate;"]}